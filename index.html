<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Cloud Text Translate ‚Äî Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#121212;
  --card:#1e1e1e;
  --accent:#6ee7b7;
  --accent-2:#60a5fa;
  --text:#f5f5f5;
  --muted:#aaa;
  --input-bg:#2a2a2a;
  --input-border:#444;
}

body{
  margin:0;
  font-family:'Inter', sans-serif;
  background: linear-gradient(rgba(18,18,18,0.85), rgba(18,18,18,0.85)),
              url('https://images.unsplash.com/photo-1593642532973-d31b6557fa68?auto=format&fit=crop&w=1350&q=80') no-repeat center center fixed;
  background-size: cover;
  padding:20px;
  display:flex;
  justify-content:center;
  min-height:100vh;
  color:var(--text);
}

.container{
  max-width:700px;
  width:100%;
  background:var(--card);
  border-radius:16px;
  padding:20px;
  box-shadow:0 10px 30px rgba(0,0,0,0.7);
}

/* Header */
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
}
.header h1{
  margin:0;
  font-size:2rem;
  color:var(--accent);
}

/* User info */
.user-info{
  display:flex;
  justify-content:flex-end;
  gap:10px;
  margin-bottom:10px;
}
.user-info span{font-size:14px;color:var(--muted);}
.logout{
  background:#333;
  border-radius:8px;
  padding:5px 12px;
  border:none;
  cursor:pointer;
  color:var(--text);
  transition:0.3s;
}
.logout:hover{
  background:var(--accent-2);
  color:#04203a;
}

/* Card */
.card{
  padding:15px;
  border-radius:12px;
  background:#1f1f1f;
  box-shadow:0 6px 20px rgba(0,0,0,0.6);
  display:flex;
  flex-direction:column;
  gap:15px;
}

/* Inputs and textareas */
textarea, input[type=file], select{
  width:100%;
  padding:10px;
  border-radius:8px;
  border:1px solid var(--input-border);
  font-size:14px;
  background:var(--input-bg);
  color:var(--text);
}
textarea{min-height:120px;}

/* Buttons */
.btn{
  padding:10px 14px;
  border-radius:8px;
  border:none;
  background:linear-gradient(90deg,var(--accent-2),var(--accent));
  color:#04203a;
  font-weight:600;
  cursor:pointer;
  transition:0.3s;
}
.btn:hover{opacity:0.9;}

/* Upload Section centered */
.upload-section{
  display:flex;
  flex-direction:column;
  gap:10px;
  align-items:center;
  margin-top:10px;
}
.upload-section .upload-item{
  width:60%;
  display:flex;
  flex-direction:column;
  gap:5px;
}
.upload-section .upload-item input{
  width:100%;
}

/* Footer */
.footer{
  margin-top:20px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-size:12px;
  color:var(--muted);
  flex-wrap:wrap;
  gap:10px;
}
.footer div{
  display:flex;
  gap:15px;
  flex-wrap:wrap;
  align-items:center;
}
.footer div button{
  padding:5px 10px;
  border:none;
  border-radius:6px;
  background:var(--accent);
  color:#04203a;
  cursor:pointer;
  transition:0.3s;
}
.footer div button:hover{
  background:var(--accent-2);
}

@media(max-width:700px){
  .upload-section .upload-item{width:100%;}
  .footer{flex-direction:column; align-items:flex-start; gap:10px;}
}
</style>
</head>
<body>
<div class="container">

  <!-- Header -->
  <div class="header">
    <h1>Cloud Text Translate üåê</h1>
  </div>

  <!-- User Info -->
  <div class="user-info">
    <span id="userEmail">user@example.com</span>
    <button id="logoutBtn" class="logout">Logout</button>
  </div>

  <!-- Translation Card -->
  <div class="card">
    <label><strong>Input Text</strong></label>
    <textarea id="sourceText" placeholder="Enter text or paste..."></textarea>

    <label><strong>Translated</strong></label>
    <textarea id="translatedText" readonly></textarea>

    <div style="display:flex;gap:8px;margin-top:5px;">
      <select id="sourceLang">
        <option value="auto">Detect</option>
        <option value="en">English</option>
        <option value="hi">Hindi</option>
        <option value="es">Spanish</option>
        <option value="fr">French</option>
      </select>

      <select id="targetLang">
        <option value="hi">Hindi</option>
        <option value="en">English</option>
        <option value="es">Spanish</option>
        <option value="fr">French</option>
      </select>
    </div>

    <!-- Upload Section Centered -->
    <div class="upload-section">
      <div class="upload-item">
        <label>üì∑ Upload Image</label>
        <input type="file" id="imageUpload" accept="image/*">
      </div>
      <div class="upload-item">
        <label>üìÑ Upload Document</label>
        <input type="file" id="documentUpload" accept=".txt,.pdf,.doc,.docx">
      </div>
      <button id="translateUploadBtn" class="btn">Translate Upload</button>
    </div>

    <label style="margin-top:5px;"><strong>Upload Translation Result</strong></label>
    <textarea id="uploadResult" readonly></textarea>

    <button id="translateBtn" class="btn" style="margin-top:10px;">Translate Text</button>
  </div>

  <!-- Footer -->
  <div class="footer">
    <div class="help">
      <strong>Help:</strong>
      <p>Support</p>
      <p>Contact</p>
      <p>FAQ</p>
    </div>
    <div class="popular-btn">
      <button onclick="window.location.href='popular.html'">üåç Popular Translations</button>
    </div>
    <div class="history-btn">
      <button onclick="alert('History feature coming soon!')">üïò History</button>
    </div>
  </div>

</div>

<script>
const TRANSLATE_ROUTE = "https://q9jdrd621a.execute-api.ap-south-1.amazonaws.com/dev/translate";

// Elements
const sourceText = document.getElementById('sourceText');
const translatedText = document.getElementById('translatedText');
const translateBtn = document.getElementById('translateBtn');
const targetLang = document.getElementById('targetLang');
const imageUpload = document.getElementById('imageUpload');
const documentUpload = document.getElementById('documentUpload');
const translateUploadBtn = document.getElementById('translateUploadBtn');
const uploadResult = document.getElementById('uploadResult');
const logoutBtn = document.getElementById('logoutBtn');
const userEmail = document.getElementById('userEmail');

// ===== LOGIN CHECK =====
window.onload = () => {
  const loggedIn = localStorage.getItem('loggedIn');
  if(!loggedIn){
    // Not logged in, redirect to logout page
    window.location.href = 'logout.html';
    return;
  }
  userEmail.textContent = loggedIn; // show email
}

// ===== LOGOUT FUNCTION =====
logoutBtn.addEventListener('click', () => {
  localStorage.removeItem('loggedIn');
  window.location.href = 'logout.html'; // Redirect to logged out page
});

// ===== TRANSLATION FUNCTION =====
translateBtn.addEventListener('click', async () => {
  const text = sourceText.value.trim();
  if(!text){ alert('Enter text'); return; }
  translatedText.value = 'Translating...';
  try {
    const res = await fetch(TRANSLATE_ROUTE, {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ text: text, target_lang: targetLang.value })
    });
    const data = await res.json();
    translatedText.value = data.translated_text || "Error translating.";
  } catch (err) {
    translatedText.value = "Network error";
  }
});

// ===== UPLOAD TRANSLATION =====
translateUploadBtn.addEventListener('click', async () => {
  const formData = new FormData();
  if(imageUpload.files.length===0 && documentUpload.files.length===0){ alert('Select a file to translate'); return; }
  if(imageUpload.files.length>0){ formData.append('file', imageUpload.files[0]); formData.append('type','image'); }
  else if(documentUpload.files.length>0){ formData.append('file', documentUpload.files[0]); formData.append('type','document'); }
  formData.append('target_lang', targetLang.value);
  uploadResult.value='Translating file...';
  try{
    const res = await fetch(TRANSLATE_ROUTE,{ method:'POST', body:formData });
    const data = await res.json();
    uploadResult.value = data.translated_text || 'Error translating file.';
  } catch(err){ uploadResult.value='Network error'; }
});
</script>
</body>
</html>
